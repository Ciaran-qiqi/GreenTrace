# GreenTrace 碳信用NFT生态系统 - 功能说明文档

## 📋 项目概述

**GreenTrace** 是一个基于区块链技术的碳信用NFT生态系统，旨在通过记录用户的环保行为，将绿色行动转化为有价值的数字资产。项目采用去中心化的方式，通过智能合约确保数据透明性和可信度，为用户提供环保激励和碳信用交易平台。

### 🌟 核心价值

- **环保激励**：鼓励用户参与环保行为，获得碳信用奖励
- **数据透明**：基于区块链技术，确保环保数据的不可篡改性
- **价值变现**：将环保行为转化为可交易的数字资产
- **社区建设**：构建绿色环保的Web3社区

## 🏗️ 技术架构

### 前端技术栈

- **框架**：Next.js 15.3.4 + React 19
- **Web3集成**：Wagmi + RainbowKit + Ethers.js
- **样式**：Tailwind CSS 4
- **语言**：TypeScript
- **状态管理**：TanStack React Query
- **国际化**：支持中英文双语

### 智能合约架构

- **GreenTrace**：核心管理合约，负责生态系统管理
- **CarbonToken**：碳信用代币合约，ERC20标准
- **GreenTalesNFT**：NFT合约，ERC721标准
- **Market**：NFT交易市场合约
- **CarbonPriceOracle**：碳价格预言机合约
- **GreenTalesLiquidityPool**：流动性池合约
- **CarbonUSDTMarket**：订单簿市场合约

### 支持网络

- **Sepolia测试网**：主要开发和测试环境
- **以太坊主网**：生产环境
- **本地Foundry测试网**：本地开发环境

## 👥 用户权限体系

### 1. 普通用户（Visitor）

**权限范围**：

- 浏览首页和项目介绍
- 查看碳币市场行情
- 查看NFT市场
- 查看流动性池信息

**功能入口**：

- 🏠 首页
- 📈 碳币市场
- 💧 流动性池
- 🛒 NFT市场

### 2. 注册用户（Connected User）

**权限范围**：

- 所有普通用户权限
- 创建绿色NFT
- 管理个人资产
- 参与NFT交易
- 申请NFT兑换

**功能入口**：

- 🌱 NFT创建
- 💼 我的资产
- 🏪 我的挂单
- 🔄 NFT兑换

### 3. 审计员（Auditor）

**权限范围**：

- 所有注册用户权限
- 审核NFT创建申请
- 审核NFT兑换申请
- 查看审计数据

**功能入口**：

- 🔍 审计中心

### 4. 管理员（Admin）

**权限范围**：

- 所有审计员权限
- 系统数据统计
- 审计员管理
- 合约管理
- 系统设置

**功能入口**：

- ⚙️ 管理中心

## 🎯 核心功能模块

### 1. 🌱 NFT创建模块

**功能描述**：用户记录环保行为，创建绿色NFT

**主要功能**：

- 环保行为记录（出行方式、能源使用、废物处理等）
- NFT元数据生成
- 请求费用支付
- 创建状态跟踪

**使用流程**：

1. 连接钱包
2. 填写环保行为信息
3. 上传相关证明材料
4. 支付碳代币请求费用
5. 提交审核申请
6. 等待审计员审核

**技术实现**：

- 使用IPFS存储NFT元数据
- 智能合约管理创建请求
- 多语言支持的表单验证

### 2. 🔍 审计中心模块

**功能描述**：专业审计员验证环保行为真实性

**主要功能**：

- 待审核申请列表
- 申请详情查看
- 审核结果提交
- 审核历史记录

**审核流程**：

1. 查看待审核申请
2. 审查提交的材料
3. 验证环保行为真实性
4. 提交审核结果（通过/拒绝）
5. 记录审核意见

**权限控制**：

- 仅授权审计员可访问
- 审核结果不可篡改
- 审核记录永久保存

### 3. 🏪 NFT交易市场模块

**功能描述**：提供NFT的展示、搜索、购买和销售功能

**主要功能**：

- NFT网格展示
- 高级搜索和筛选
- 价格排序功能
- 购买和销售操作
- 交易历史记录

**市场特性**：

- 实时价格更新
- 交易手续费1%
- 支持批量操作
- 交易状态跟踪

**筛选功能**：

- 按价格范围筛选
- 按创建时间排序
- 按碳减排量排序
- 关键词搜索

### 4. 💰 碳币交易市场模块

**功能描述**：提供碳代币的市价单和限价单交易

**主要功能**：

- 实时价格显示
- 市价单交易
- 限价单交易
- 订单簿显示
- 交易历史

**交易类型**：

- **市价单**：立即以当前市场价格成交
- **限价单**：指定价格进行交易
- **挂单管理**：查看和管理个人挂单

**市场特性**：

- 智能撮合引擎
- 价格保护机制
- 交易手续费0.3%
- 挂单手续费0.5%

### 5. 💧 流动性池模块

**功能描述**：提供碳代币和USDT的流动性交易

**主要功能**：

- 流动性添加
- 流动性移除
- 收益计算
- 池子状态显示

**流动性管理**：

- 添加碳代币和USDT获得LP代币
- 移除流动性获得相应代币
- 赚取交易手续费收益
- 实时收益计算

**风险提示**：

- 无常损失风险
- 流动性提供者收益
- 池子深度显示

### 6. 🔄 NFT兑换模块

**功能描述**：将审核通过的NFT兑换为碳代币

**主要功能**：

- 可兑换NFT列表
- 兑换申请提交
- 兑换状态跟踪
- 兑换历史记录

**兑换流程**：

1. 查看可兑换的NFT
2. 选择要兑换的NFT
3. 提交兑换申请
4. 等待审计员审核
5. 审核通过后获得碳代币

**兑换规则**：

- 仅审核通过的NFT可兑换
- 兑换比例根据碳减排量计算
- 需要支付兑换手续费

### 7. 💼 资产管理模块

**功能描述**：管理用户的NFT和碳代币资产

**主要功能**：

- NFT资产展示
- 碳代币余额显示
- 资产转移功能
- 交易历史记录

**资产类型**：

- **NFT资产**：用户创建的绿色NFT
- **碳代币**：碳信用代币余额
- **LP代币**：流动性提供者代币

### 8. ⚙️ 管理中心模块

**功能描述**：系统管理和数据分析（仅管理员）

**主要功能**：

- **数据统计**：系统整体数据概览
- **审计员管理**：添加/移除审计员
- **审计数据管理**：查看所有审计记录
- **合约管理**：合约参数配置
- **系统设置**：系统级配置

**管理功能**：

- 用户权限管理
- 系统参数调整
- 数据统计分析
- 合约升级管理

## 🔄 完整业务流程

### 1. 用户注册流程

1. 访问GreenTrace网站
2. 连接Web3钱包（MetaMask等）
3. 授权应用访问钱包
4. 完成用户注册

### 2. NFT创建流程

1. **行为记录**：用户记录环保行为
2. **材料提交**：上传相关证明材料
3. **费用支付**：使用碳代币支付请求费用
4. **申请提交**：提交NFT创建申请
5. **等待审核**：等待审计员审核
6. **审核结果**：获得审核结果
7. **NFT铸造**：审核通过后自动铸造NFT

### 3. NFT交易流程

1. **市场浏览**：在NFT市场浏览可购买的NFT
2. **NFT选择**：选择心仪的NFT
3. **价格确认**：确认购买价格
4. **交易执行**：执行购买交易
5. **NFT获得**：获得购买的NFT
6. **交易记录**：记录交易历史

### 4. 碳代币交易流程

1. **市场进入**：进入碳币交易市场
2. **订单类型选择**：选择市价单或限价单
3. **交易参数设置**：设置交易数量和价格
4. **订单提交**：提交交易订单
5. **订单撮合**：等待订单撮合
6. **交易完成**：完成交易并获得代币

### 5. NFT兑换流程

1. **NFT查看**：查看可兑换的NFT
2. **兑换申请**：提交兑换申请
3. **等待审核**：等待审计员审核
4. **审核通过**：审核通过后获得碳代币
5. **资产更新**：更新用户资产余额

## 🛡️ 安全特性

### 1. 智能合约安全

- 多签名钱包支持
- 权限控制机制
- 紧急暂停功能
- 合约升级机制

### 2. 数据安全

- IPFS分布式存储
- 数据加密传输
- 隐私保护机制
- 审计日志记录

### 3. 用户安全

- 钱包连接安全
- 交易确认机制
- 错误处理机制
- 网络状态监控

## 📊 数据统计

### 系统指标

- 总NFT数量
- 总碳减排量
- 活跃用户数
- 交易量统计

### 用户指标

- 个人NFT数量
- 碳代币余额
- 交易历史
- 收益统计

## 🔧 技术特性

### 1. 响应式设计

- 支持桌面端和移动端
- 自适应布局
- 触摸友好界面

### 2. 性能优化

- 代码分割
- 图片优化
- 缓存策略
- 懒加载

### 3. 用户体验

- 加载状态提示
- 错误处理机制
- 操作确认对话框
- 成功反馈提示

### 4. 国际化支持

- 中英文双语支持
- 动态语言切换
- 本地化内容
- 文化适配

## 🚀 部署和运维

### 开发环境

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm start
```

### 环境配置

- 配置Web3钱包连接
- 设置智能合约地址
- 配置IPFS节点
- 设置环境变量

### 监控和维护

- 错误日志监控
- 性能指标监控
- 用户行为分析
- 系统健康检查

## 📞 技术支持

### 文档资源

- 用户使用手册
- 开发者文档
- API接口文档
- 智能合约文档

### 社区支持

- Discord社区
- GitHub Issues
- 技术支持邮箱
- 在线帮助中心

---

*本文档版本：v1.0*
*最后更新：2025年6月*
*项目地址：https://github.com/greentrace/frontend*

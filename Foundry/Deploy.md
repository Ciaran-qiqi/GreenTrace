# GreenTrace ç”Ÿæ€ç³»ç»Ÿéƒ¨ç½²ä¿¡æ¯

## éƒ¨ç½²æ¦‚è§ˆ

- **éƒ¨ç½²æ—¶é—´**: 2025å¹´06æœˆ19æ—¥
- **ç½‘ç»œ**: Sepolia æµ‹è¯•ç½‘
- **éƒ¨ç½²è€…åœ°å€**: ç§é’¥
- **éƒ¨ç½²æ–¹å¼**: åˆ†æ­¥éƒ¨ç½² (DeployStepByStep.s.sol)
- **æ€»Gasæ¶ˆè€—**: 9,574,914 gas
- **æ€»è´¹ç”¨**: 0.000017442228262326 ETH

## åˆçº¦åœ°å€åˆ—è¡¨

### 1. CarbonToken (ç¢³å¸åˆçº¦)

- **åˆçº¦åœ°å€**: `0x808b73A3A1D97382acF32d4F4F834e799Aa08198`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x808b73A3A1D97382acF32d4F4F834e799Aa08198)
- **éƒ¨ç½²äº¤æ˜“**: `0xcb970676186faf3276dd671472b924098da0a00da5a9896c17774c62d3cbda3c`
- **åˆå§‹ä¾›åº”é‡**: 1,000,000 ç¢³å¸ (1,000,000 * 10^18)
- **æ¥æ”¶åœ°å€**: `0x294761C91734360C5A70e33F8372778ED2849767`

### 2. GreenTrace (æ ¸å¿ƒåˆçº¦)

- **åˆçº¦åœ°å€**: `0x11e6b5Aeff2FaeFe489776aDa627B2C621ee8673`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x11e6b5Aeff2FaeFe489776aDa627B2C621ee8673)
- **éƒ¨ç½²äº¤æ˜“**: `0x207d0680a5708c5669479662931af444a19109012c1a5ffacfd4d1fa78d92b80`
- **ç¢³å¸åˆçº¦**: `0x808b73A3A1D97382acF32d4F4F834e799Aa08198`
- **NFTåˆçº¦**: `0x3456a42043955B1626F6353936c0FEfCd1cB5f1c`

### 3. GreenTalesNFT (NFTåˆçº¦)

- **åˆçº¦åœ°å€**: `0x3456a42043955B1626F6353936c0FEfCd1cB5f1c`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x3456a42043955B1626F6353936c0FEfCd1cB5f1c)
- **éƒ¨ç½²äº¤æ˜“**: `0xea119be0d14dc897d39aafe51ea45faabc78b8c5b2c48de5d6df988564f34a56`
- **GreenTraceåˆçº¦**: `0x11e6b5Aeff2FaeFe489776aDa627B2C621ee8673`

### 4. CarbonPriceOracle (ç¢³ä»·é¢„è¨€æœº)

- **åˆçº¦åœ°å€**: `0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c)
- **éƒ¨ç½²äº¤æ˜“**: `0x122969fd546d79e1fbbf55fbc3e53944ac2fd692634334834c40602c60cf1aa0`
- **Functions Router**: `0x6E2dc0F9DB014aE19888F539E59285D2Ea04244C`
- **DON ID**: `0x66756e2d657468657265756d2d7365706f6c69612d3100000000000000000000`
- **EUR/USD Feed**: `0x1a81afB8146aeFfCFc5E50e8479e826E7D55b910`
- **LINK Token**: `0x779877A7B0D9E8603169DdbD7836e478b4624789`

### 5. GreenTalesLiquidityPool (æµåŠ¨æ€§æ± )

- **åˆçº¦åœ°å€**: `0x6c9c8c371cBD71108e272D20c86978AdB2f9a114`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x6c9c8c371cBD71108e272D20c86978AdB2f9a114)
- **éƒ¨ç½²äº¤æ˜“**: `0x3983d5335aeb595a648aaebadedd41855231a49bc848fc3a00c2568ffe86f0ba`
- **ç¢³å¸åˆçº¦**: `0x808b73A3A1D97382acF32d4F4F834e799Aa08198`
- **USDTåˆçº¦**: `0xdCdC73413C6136c9ABcC3E8d250af42947aC2Fc7`
- **ç¢³ä»·é¢„è¨€æœº**: `0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c`

### 6. GreenTalesMarket (NFTå¸‚åœº)

- **åˆçº¦åœ°å€**: `0x82c59961a858f92816d61be7Ec28541E51d37224`
- **Etherscan**: [æŸ¥çœ‹åˆçº¦](https://sepolia.etherscan.io/address/0x82c59961a858f92816d61be7Ec28541E51d37224)
- **éƒ¨ç½²äº¤æ˜“**: `0xe71d9e068aba8249136adba707e67d00c0dd2e4b08777fcde69a821f56cd0004`
- **NFTåˆçº¦**: `0x3456a42043955B1626F6353936c0FEfCd1cB5f1c`
- **ç¢³å¸åˆçº¦**: `0x808b73A3A1D97382acF32d4F4F834e799Aa08198`
- **æ‰‹ç»­è´¹ç‡**: 1% (100/10000)
- **æ‰‹ç»­è´¹æ¥æ”¶åœ°å€**: `0x294761C91734360C5A70e33F8372778ED2849767`
- **GreenTraceåˆçº¦**: `0x11e6b5Aeff2FaeFe489776aDa627B2C621ee8673`

## ç½‘ç»œé…ç½®

### Sepolia æµ‹è¯•ç½‘åœ°å€

- **USDT**: `0xdCdC73413C6136c9ABcC3E8d250af42947aC2Fc7` (18ä½ç²¾åº¦)
- **EUR/USD ä»·æ ¼é¢„è¨€æœº**: `0x1a81afB8146aeFfCFc5E50e8479e826E7D55b910`
- **Chainlink Token**: `0x779877A7B0D9E8603169DdbD7836e478b4624789`
- **Functions Router**: `0x6E2dc0F9DB014aE19888F539E59285D2Ea04244C`
- **DON ID**: `0x66756e2d657468657265756d2d7365706f6c69612d3100000000000000000000`

## éƒ¨ç½²å‚æ•°

### åˆå§‹é…ç½®

- **åˆå§‹ç¢³å¸ä¾›åº”é‡**: 1,000,000 ç¢³å¸
- **åˆå§‹USDTæ•°é‡**: 88,000,000 USDT (18ä½ç²¾åº¦)
- **åˆå§‹ä»·æ ¼**: 88 USDT/ç¢³å¸
- **å¸‚åœºæ‰‹ç»­è´¹ç‡**: 1%
- **æµåŠ¨æ€§æ± æ‰‹ç»­è´¹ç‡**: 0.3%
- **ä»·æ ¼åç¦»é˜ˆå€¼**: 10%

### åˆçº¦åˆå§‹åŒ–çŠ¶æ€

- âœ… CarbonToken å·²éƒ¨ç½²å¹¶åˆ†é…åˆå§‹ä¾›åº”é‡
- âœ… GreenTrace å·²éƒ¨ç½²å¹¶è®¾ç½®ç¢³å¸åˆçº¦
- âœ… GreenTalesNFT å·²éƒ¨ç½²å¹¶è®¾ç½®GreenTraceåœ°å€
- âœ… åˆçº¦é—´ä¾èµ–å…³ç³»å·²æ­£ç¡®è®¾ç½®
- âœ… GreenTrace å·²åˆå§‹åŒ–
- âœ… CarbonPriceOracle å·²éƒ¨ç½²
- âœ… GreenTalesLiquidityPool å·²éƒ¨ç½²å¹¶è®¾ç½®é¢„è¨€æœº
- âœ… GreenTalesMarket å·²éƒ¨ç½²

## ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é…ç½®é¢„è¨€æœº

```bash
# æ›´æ–° .env æ–‡ä»¶
CARBON_PRICE_ORACLE_ADDRESS=0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c
CHAINLINK_FUNCTIONS_SUBSCRIPTION_ID=5045

# è¿è¡Œé…ç½®è„šæœ¬
forge script script/ConfigureOracle.s.sol:ConfigureOracle \
  --rpc-url https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY \
  --private-key YOUR_PRIVATE_KEY \
  --broadcast -vvvv
```

ğŸ‰ é¢„è¨€æœºé…ç½®æˆåŠŸï¼

ğŸ‰ å¤ªæ£’äº†ï¼é¢„è¨€æœºåˆçº¦éƒ¨ç½²æˆåŠŸï¼

## éƒ¨ç½²ç»“æœï¼š

* âœ… æ–°é¢„è¨€æœºåœ°å€: 0xFDA7AaAB821186B9fABa7B0418df0f514d221dec
* âœ… è®¢é˜…ID: 5045
* âœ… æ“ä½œå‘˜: 0x294761C91734360C5A70e33F8372778ED2849767
* âœ… åˆå§‹Gasé™åˆ¶: 1,000,000
* âœ… éƒ¨ç½²è´¹ç”¨: 0.000002566139463261 ETH

## ä¸‹ä¸€æ­¥æ“ä½œï¼š

## âœ… é…ç½®å®ŒæˆçŠ¶æ€ï¼š

### 1. è®¢é˜…IDè®¾ç½®æˆåŠŸ

* è®¢é˜…ID: 5045
* äº¤æ˜“å“ˆå¸Œ: 0x93ce804f0abacb0ee54aa2f14a1cd6c1ea18a3ff4b88539bfd1c0f0cfa5094db

### 2. æ“ä½œå‘˜æ·»åŠ æˆåŠŸ

* æ“ä½œå‘˜åœ°å€: 0x4b5EF7cA580Db6f98D794A1b78d56773Bc83F9D3
* äº¤æ˜“å“ˆå¸Œ: 0x8e65f864de9f5c3e824d1e2cebfee80fe683700c259523a90e4800c07d6db86b

### 3. éªŒè¯é€šè¿‡

* âœ… è®¢é˜…IDéªŒè¯æˆåŠŸ
* âœ… æ“ä½œå‘˜æƒé™éªŒè¯æˆåŠŸ

### 2. åˆå§‹åŒ–æµåŠ¨æ€§æ± 

```bash
# æˆæƒUSDTç»™æµåŠ¨æ€§æ± 
cast send 0xdCdC73413C6136c9ABcC3E8d250af42947aC2Fc7 \
  "approve(address,uint256)" \
  0x6c9c8c371cBD71108e272D20c86978AdB2f9a114 \
  44000000000000000000000000 \
  --private-key YOUR_PRIVATE_KEY

# æ·»åŠ æµåŠ¨æ€§
cast send 0x6c9c8c371cBD71108e272D20c86978AdB2f9a114 \
  "addLiquidity(uint256,uint256)" \
  500000000000000000000000 \
  44000000000000000000000000 \
  --private-key YOUR_PRIVATE_KEY
```

æµåŠ¨æ€§æ± åˆå§‹åŒ–æˆåŠŸï¼

* äº¤æ˜“å“ˆå¸Œï¼š0xd724ef8904a3881deda2b6c5e6c476f1ebc753949e59169ca764a03796fc46aa
* åŒºå—å·ï¼š8576809
* çŠ¶æ€ï¼šæˆåŠŸ

ä½ å·²ç»æˆåŠŸå‘æµåŠ¨æ€§æ±  0x6c9c8c371cBD71108e272D20c86978AdB2f9a114 æ·»åŠ äº†* 50ä¸‡ç¢³å¸ï¼ˆ500000 \* 1e18ï¼‰

* 4400ä¸‡ USDTï¼ˆ44,000,000 \* 1e18ï¼‰

https://sepolia.etherscan.io/tx/0xd724ef8904a3881deda2b6c5e6c476f1ebc753949e59169ca764a03796fc46aa

### 

3. æµ‹è¯•é¢„è¨€æœº

```bash
# è¯·æ±‚æ›´æ–°ç¢³ä»·
cast send 0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c \
  "requestCarbonPrice()" \
  --private-key YOUR_PRIVATE_KEY
```

âœ… äº¤æ˜“è¯¦æƒ…ï¼š

* äº¤æ˜“å“ˆå¸Œ: 0xca7bb7584d8db765219591efd79c722abe0661a9dfa9b70445764b01dec3e3e8
* åŒºå—å·: 8576786
* çŠ¶æ€: æˆåŠŸæ‰§è¡Œ
* Gasæ¶ˆè€—: 48,043 gas

ä½ å¯ä»¥æŸ¥çœ‹ PriceUpdated äº‹ä»¶ï¼š

ğŸ” æŸ¥çœ‹æ–¹å¼ï¼š

1Etherscan åˆçº¦é¡µé¢ï¼ˆæ¨èï¼‰

è®¿é—®ä½ çš„é¢„è¨€æœºåˆçº¦é¡µé¢ï¼š

https://sepolia.etherscan.io/address/0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c

ç„¶åï¼š* ç‚¹å‡» "Events" æ ‡ç­¾é¡µ

* æŸ¥çœ‹æ˜¯å¦æœ‰æ–°çš„ PriceUpdated äº‹ä»¶
* äº‹ä»¶ä¼šæ˜¾ç¤ºæ¬§å…ƒä»·æ ¼ã€ç¾å…ƒä»·æ ¼å’Œæ—¶é—´æˆ³
*

2.æˆ–è€…

cast logs 0x619953d9a7D946360E53f9aFF79ed8F2b3Cd3E6c --from-block 8576786 --rpc-url https://eth-sepolia.g.alchemy.com/v2/hAep1geH-r3ppdFDXWBK5Ymvmn9Zl7ql

## åˆçº¦éªŒè¯çŠ¶æ€

æ‰€æœ‰åˆçº¦å·²é€šè¿‡ Etherscan éªŒè¯ï¼š

- âœ… CarbonToken - å·²éªŒè¯
- âœ… GreenTrace - å·²éªŒè¯
- âœ… GreenTalesNFT - å·²éªŒè¯
- âœ… CarbonPriceOracle - å·²éªŒè¯
- âœ… GreenTalesLiquidityPool - å·²éªŒè¯
- âœ… GreenTalesMarket - å·²éªŒè¯

## æ³¨æ„äº‹é¡¹

1. **USDTç²¾åº¦**: Sepoliaæµ‹è¯•ç½‘USDTä½¿ç”¨18ä½ç²¾åº¦ï¼Œä¸ä¸»ç½‘6ä½ç²¾åº¦ä¸åŒ
2. **é¢„è¨€æœºé…ç½®**: éœ€è¦è®¾ç½®è®¢é˜…IDå’Œæ“ä½œå‘˜æƒé™
3. **æµåŠ¨æ€§åˆå§‹åŒ–**: éœ€è¦å…ˆæˆæƒUSDTï¼Œå†æ·»åŠ æµåŠ¨æ€§
4. **APIé›†æˆ**: é¢„è¨€æœºå·²é…ç½®ä¸ºè°ƒç”¨ `https://greentrace-api.onrender.com/api/carbon-price`
5. **ä»·æ ¼åç¦»æ£€æŸ¥**: æµåŠ¨æ€§æ± å·²è®¾ç½®10%çš„ä»·æ ¼åç¦»é˜ˆå€¼

## éƒ¨ç½²è„šæœ¬

- **åˆ†æ­¥éƒ¨ç½²è„šæœ¬**: `script/DeployStepByStep.s.sol`
- **é…ç½®è„šæœ¬**: `script/ConfigureOracle.s.sol`
- **å®Œæˆåˆå§‹åŒ–è„šæœ¬**: `script/CompleteInitialization.s.sol`

---

*éƒ¨ç½²å®Œæˆæ—¶é—´: 2024å¹´12æœˆ19æ—¥*
*éƒ¨ç½²è€…: 0x294761C91734360C5A70e33F8372778ED2849767*
